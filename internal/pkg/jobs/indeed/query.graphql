# .graphqlconfig=/Users/donalbyrne/code/lc/giggly/internal/pkg/agents/indeed!
query SearchJobs(
    # @genqlient(pointer: true)
    $cursor: String,
    # @genqlient(pointer: true)
    $lastSearchTime: Timestamp,
) {
    jobSearch(cursor: $cursor, limit: 100, what:"kommunikat√∂r", location: {
            where: "56.6499, 16.46859", radius: 30, radiusUnit: KILOMETERS
        },
        lastSearchTime: $lastSearchTime,
        filters: [
            {
                keyword: {
                    field: "occupations", keys: [
                        "NPKCD", # mat
                        "SZ69B" #bygg
                    ],operation: OR, match: MUST_NOT
                }
            },
            {
                keyword: {
                    field: "location.city", keys: [
                        "Nybro"
                    ], operation: OR, match: MUST_NOT
                }
            },
            {
                keyword: {
                    field: "attributes", keys: [
                        "4CXY6", #nurse
                        "VDTG7",
                        "75GKK", # deltid
                        "8GGC3", # timmar
                        "QSU24", #ip net
                        "SUDVY", #shifts
                        "KYZ6U", #redovisning
                        "RY9MK", #linux
                        "CJWTS", # extrajobb
                    ], operation: OR, match: MUST_NOT
                }
            }
        ]) {
        pageInfo {
            nextPages {
                cursor
                pageNum
            }
        }
        estimatedTotalResultsCount
        results {
            job {
                title,
                key,
                expired
                url,
                employer {
                    name
                }
                location {
                    city
                    countryCode
                }
                attributes {
                    label
                    key
                }
                occupations {
                    label
                    key
                }
            }
        }
    }
}